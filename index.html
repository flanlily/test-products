<!DOCTYPE html>
<html lang="ja">

    <head>
        <meta charset="utf-8" />
        <meta content="width=device-width, initial-scale=1" name="viewport" />
        <link href="style.css" rel="stylesheet" />
        <title>PDC非対応計算ツール</title>
        <link href="./manifest.json" rel="manifest" />
        <meta content="#0078d7" name="theme-color" />
        <link rel="apple-touch-startup-image" href="20250922.png" />
    </head>

    <body>
        <div id="login-view">
            <div class="login-box">
                <h2>ログイン</h2>
                <div class="input-group">
                    <label>ID</label>
                    <input type="text" id="login-id" placeholder="ユーザーID">
                </div>
                <div class="input-group">
                    <label>Password</label>
                    <input type="password" id="login-pass" placeholder="パスワード">
                </div>
                <button id="login-button">ログイン</button>
                <p id="login-msg" style="color: #ffcccc; margin-top: 10px; font-size: 0.9em;"></p>
            </div>
        </div>
        <div id="app-view" class="hidden">
            
            <div class="notification-sync-bar">
                <div class="notification-icon" id="notificationIcon">
                    <span class="notification-badge hidden" id="notificationBadge"></span>
                </div>
                <button id="external-links-button" title="外部リンクを表示">🔗 外部リンク</button>
                <button id="syncButton">ログアウト</button> </div>

            <div class="popup-wrapper hidden" id="notificationPopup">
                <div class="popup-overlay" id="popupOverlay"></div>
                <div class="popup-content">
                    <h2>お知らせ</h2>
                    <div id="notification-list"></div>
                    <button id="popupCloseButton">閉じる</button>
                </div>
            </div>

            <div class="popup-wrapper hidden" id="links-popup" aria-hidden="true">
                <div class="popup-overlay" id="links-popup-overlay"></div>
                <div class="popup-content" role="dialog" aria-labelledby="links-popup-title">
                   <h2 id="links-popup-title">外部リンク</h2>
                   <div id="links-popup-list" style="margin-bottom:16px;">
                        <button id="links-popup-close-button">閉じる</button>
                   </div>
                </div>
            </div>

            <div class="container">
                <h1>β版 割合計算ツール(TP版)</h1>
                
                <div class="tabs">
                    <button class="tab-button active" data-tab="damage">割合計算</button>
                </div>
                
                <div class="tab-content" id="damage">
                    <div class="input-group">
                        <label for="dungeonSelect">ダンジョン選択:</label>
                        <select id="dungeonSelect"></select>
                    </div>
                    <div id="results">
                        <h2>計算結果</h2>
                        <p id="totalReductionRate"></p>
                        <table class="results-table" id="resultsTable">
                            <thead>
                                <tr>
                                    <th>フロアの割合ダメージ</th>
                                    <th>最終的なHPに対するダメージ割合</th>
                                    <th>耐えれるか</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>
        
        </div> 
        <script src="script.js" defer></script>
    </body>
</html>
